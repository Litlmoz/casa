floorplans_json = [
  {"id":"1","type":"floorplans","attributes":{"layout":215003,"windows":{"window1":"","window2":"","window3":"","window4":"","window5":""},"flats":[{"id":73,"floorplan_id":1,"bed":1,"bath":1,"stack":"33","floor":"4","sqft":845,"is_active":true,"created_at":"2017-02-25T02:09:51.835Z","updated_at":"2017-02-25T06:50:47.788Z","city_view":nil}]}},{"id":"2","type":"floorplans","attributes":{"layout":215007,"windows":{"window1":2,"window2":2,"window3":"","window4":"","window5":""},"flats":[{"id":76,"floorplan_id":2,"bed":1,"bath":1,"stack":"37","floor":"6","sqft":757,"is_active":true,"created_at":"2017-02-25T02:09:52.747Z","updated_at":"2017-02-25T06:50:47.822Z","city_view":nil},{"id":74,"floorplan_id":2,"bed":1,"bath":1,"stack":"37","floor":"7","sqft":757,"is_active":true,"created_at":"2017-02-25T02:09:52.183Z","updated_at":"2017-02-25T06:50:47.861Z","city_view":nil},{"id":75,"floorplan_id":2,"bed":1,"bath":1,"stack":"37","floor":"9","sqft":757,"is_active":true,"created_at":"2017-02-25T02:09:52.424Z","updated_at":"2017-02-25T06:50:47.987Z","city_view":nil}]}},{"id":"3","type":"floorplans","attributes":{"layout":215011,"windows":{"window1":2,"window2":3,"window3":"","window4":"","window5":""},"flats":[{"id":1,"floorplan_id":3,"bed":1,"bath":1,"stack":"03","floor":"11","sqft":879,"is_active":true,"created_at":"2017-02-25T02:08:46.216Z","updated_at":"2017-02-25T06:50:48.175Z","city_view":nil}]}},{"id":"4","type":"floorplans","attributes":{"layout":215017,"windows":{"window1":"","window2":"","window3":"","window4":"","window5":""},"flats":[{"id":46,"floorplan_id":4,"bed":1,"bath":1,"stack":"26","floor":"3","sqft":789,"is_active":true,"created_at":"2017-02-25T02:09:29.239Z","updated_at":"2017-02-25T06:50:48.345Z","city_view":nil},{"id":44,"floorplan_id":4,"bed":1,"bath":1,"stack":"26","floor":"7","sqft":789,"is_active":true,"created_at":"2017-02-25T02:09:28.830Z","updated_at":"2017-02-25T06:50:48.702Z","city_view":nil},{"id":88,"floorplan_id":4,"bed":1,"bath":1,"stack":"26","floor":"16","sqft":789,"is_active":true,"created_at":"2017-02-25T02:10:01.242Z","updated_at":"2017-02-25T06:50:48.895Z","city_view":nil},{"id":45,"floorplan_id":4,"bed":1,"bath":1,"stack":"26","floor":"8","sqft":789,"is_active":true,"created_at":"2017-02-25T02:09:28.975Z","updated_at":"2017-02-25T06:50:48.530Z","city_view":nil}]}},{"id":"5","type":"floorplans","attributes":{"layout":215019,"windows":{"window1":"","window2":"","window3":"","window4":"","window5":""},"flats":[{"id":4,"floorplan_id":5,"bed":1,"bath":1,"stack":"13","floor":"10","sqft":752,"is_active":true,"created_at":"2017-02-25T02:08:46.999Z","updated_at":"2017-02-25T06:50:48.997Z","city_view":nil},{"id":3,"floorplan_id":5,"bed":1,"bath":1,"stack":"13","floor":"11","sqft":752,"is_active":true,"created_at":"2017-02-25T02:08:46.778Z","updated_at":"2017-02-25T06:50:49.090Z","city_view":nil},{"id":2,"floorplan_id":5,"bed":1,"bath":1,"stack":"13","floor":"8","sqft":752,"is_active":true,"created_at":"2017-02-25T02:08:46.515Z","updated_at":"2017-02-25T06:50:49.127Z","city_view":nil},{"id":17,"floorplan_id":5,"bed":1,"bath":1,"stack":"13","floor":"5","sqft":752,"is_active":true,"created_at":"2017-02-25T02:09:08.093Z","updated_at":"2017-02-25T06:50:49.235Z","city_view":nil}]}},{"id":"6","type":"floorplans","attributes":{"layout":215021,"windows":{"window1":2,"window2":2,"window3":"","window4":"","window5":""},"flats":[{"id":18,"floorplan_id":6,"bed":1,"bath":1,"stack":"04","floor":"10","sqft":771,"is_active":true,"created_at":"2017-02-25T02:09:08.294Z","updated_at":"2017-02-25T06:50:49.287Z","city_view":nil}]}},{"id":"7","type":"floorplans","attributes":{"layout":215027,"windows":{"window1":"","window2":"","window3":"","window4":"","window5":""},"flats":[{"id":19,"floorplan_id":7,"bed":1,"bath":1,"stack":"14","floor":"10","sqft":835,"is_active":true,"created_at":"2017-02-25T02:09:08.540Z","updated_at":"2017-02-25T06:50:49.315Z","city_view":nil}]}},{"id":"8","type":"floorplans","attributes":{"layout":215031,"windows":{"window1":2,"window2":1,"window3":1,"window4":"","window5":""},"flats":[{"id":71,"floorplan_id":8,"bed":1,"bath":1,"stack":"39","floor":"9","sqft":868,"is_active":true,"created_at":"2017-02-25T02:09:51.483Z","updated_at":"2017-02-25T06:50:49.389Z","city_view":nil}]}},{"id":"9","type":"floorplans","attributes":{"layout":215033,"windows":{"window1":"","window2":"","window3":"","window4":"","window5":""},"flats":[{"id":72,"floorplan_id":9,"bed":1,"bath":1,"stack":"38","floor":"10","sqft":734,"is_active":true,"created_at":"2017-02-25T02:09:51.635Z","updated_at":"2017-02-25T06:50:49.435Z","city_view":nil}]}},{"id":"10","type":"floorplans","attributes":{"layout":215051,"windows":{"window1":2,"window2":2,"window3":"","window4":"","window5":""},"flats":[{"id":5,"floorplan_id":10,"bed":1,"bath":1,"stack":"06","floor":"12","sqft":810,"is_active":true,"created_at":"2017-02-25T02:08:47.366Z","updated_at":"2017-02-25T06:50:49.487Z","city_view":nil}]}},{"id":"11","type":"floorplans","attributes":{"layout":215075,"windows":{"window1":3,"window2":"","window3":"","window4":"","window5":""},"flats":[{"id":119,"floorplan_id":11,"bed":0,"bath":1,"stack":"29","floor":"10","sqft":476,"is_active":true,"created_at":"2017-02-25T02:10:33.549Z","updated_at":"2017-02-25T06:50:38.269Z","city_view":nil},{"id":120,"floorplan_id":11,"bed":0,"bath":1,"stack":"28","floor":"8","sqft":476,"is_active":true,"created_at":"2017-02-25T02:10:35.444Z","updated_at":"2017-02-25T06:50:38.296Z","city_view":nil},{"id":90,"floorplan_id":11,"bed":0,"bath":1,"stack":"28","floor":"18","sqft":476,"is_active":false,"created_at":"2017-02-25T02:10:02.475Z","updated_at":"2017-02-25T02:10:48.175Z","city_view":nil},{"id":99,"floorplan_id":11,"bed":0,"bath":1,"stack":"27","floor":"18","sqft":476,"is_active":true,"created_at":"2017-02-25T02:10:07.085Z","updated_at":"2017-02-25T06:50:38.131Z","city_view":nil},{"id":112,"floorplan_id":11,"bed":0,"bath":1,"stack":"27","floor":"5","sqft":476,"is_active":true,"created_at":"2017-02-25T02:10:21.200Z","updated_at":"2017-02-25T06:50:38.183Z","city_view":nil},{"id":100,"floorplan_id":11,"bed":0,"bath":1,"stack":"29","floor":"19","sqft":476,"is_active":true,"created_at":"2017-02-25T02:10:11.034Z","updated_at":"2017-02-25T06:50:38.206Z","city_view":nil},{"id":126,"floorplan_id":11,"bed":0,"bath":1,"stack":"42","floor":"5","sqft":476,"is_active":true,"created_at":"2017-02-25T02:10:40.200Z","updated_at":"2017-02-25T06:50:38.242Z","city_view":nil},{"id":95,"floorplan_id":11,"bed":0,"bath":1,"stack":"29","floor":"21","sqft":476,"is_active":false,"created_at":"2017-02-25T02:10:04.833Z","updated_at":"2017-02-25T02:10:48.364Z","city_view":nil}]}},{"id":"12","type":"floorplans","attributes":{"layout":215075,"windows":{"window1":2,"window2":"","window3":"","window4":"","window5":""},"flats":[]}},{"id":"13","type":"floorplans","attributes":{"layout":215075,"windows":nil,"flats":[{"id":77,"floorplan_id":13,"bed":0,"bath":1,"stack":"42","floor":"3","sqft":476,"is_active":false,"created_at":"2017-02-25T02:09:53.043Z","updated_at":"2017-02-25T02:10:48.617Z","city_view":nil},{"id":78,"floorplan_id":13,"bed":0,"bath":1,"stack":"42","floor":"4","sqft":476,"is_active":false,"created_at":"2017-02-25T02:09:53.276Z","updated_at":"2017-02-25T02:10:48.763Z","city_view":nil},{"id":79,"floorplan_id":13,"bed":0,"bath":1,"stack":"40","floor":"3","sqft":476,"is_active":false,"created_at":"2017-02-25T02:09:53.539Z","updated_at":"2017-02-25T02:10:48.827Z","city_view":nil},{"id":81,"floorplan_id":13,"bed":0,"bath":1,"stack":"43","floor":"10","sqft":476,"is_active":false,"created_at":"2017-02-25T02:09:56.498Z","updated_at":"2017-02-25T02:10:48.920Z","city_view":nil},{"id":82,"floorplan_id":13,"bed":0,"bath":1,"stack":"43","floor":"7","sqft":476,"is_active":false,"created_at":"2017-02-25T02:09:58.012Z","updated_at":"2017-02-25T02:10:49.011Z","city_view":nil},{"id":83,"floorplan_id":13,"bed":0,"bath":1,"stack":"42","floor":"10","sqft":476,"is_active":false,"created_at":"2017-02-25T02:09:58.895Z","updated_at":"2017-02-25T02:10:49.052Z","city_view":nil},{"id":125,"floorplan_id":13,"bed":0,"bath":1,"stack":"41","floor":"5","sqft":476,"is_active":true,"created_at":"2017-02-25T02:10:38.403Z","updated_at":"2017-02-25T06:50:38.160Z","city_view":nil}]}},{"id":"14","type":"floorplans","attributes":{"layout":215075,"windows":{"window1":1,"window2":1,"window3":"","window4":"","window5":""},"flats":[{"id":49,"floorplan_id":14,"bed":0,"bath":1,"stack":"28","floor":"9","sqft":476,"is_active":false,"created_at":"2017-02-25T02:09:31.055Z","updated_at":"2017-02-25T02:10:49.292Z","city_view":nil},{"id":50,"floorplan_id":14,"bed":0,"bath":1,"stack":"28","floor":"7","sqft":476,"is_active":false,"created_at":"2017-02-25T02:09:31.308Z","updated_at":"2017-02-25T02:10:49.327Z","city_view":nil}]}},{"id":"15","type":"floorplans","attributes":{"layout":215075,"windows":{"window1":2,"window2":"","window3":"","window4":"","window5":""},"flats":[{"id":39,"floorplan_id":15,"bed":0,"bath":1,"stack":"29","floor":"15","sqft":476,"is_active":false,"created_at":"2017-02-25T02:09:23.623Z","updated_at":"2017-02-25T02:10:49.379Z","city_view":nil},{"id":47,"floorplan_id":15,"bed":0,"bath":1,"stack":"29","floor":"7","sqft":476,"is_active":false,"created_at":"2017-02-25T02:09:29.483Z","updated_at":"2017-02-25T02:10:49.423Z","city_view":nil},{"id":48,"floorplan_id":15,"bed":0,"bath":1,"stack":"29","floor":"3","sqft":476,"is_active":false,"created_at":"2017-02-25T02:09:29.897Z","updated_at":"2017-02-25T02:10:49.456Z","city_view":nil},{"id":94,"floorplan_id":15,"bed":0,"bath":1,"stack":"29","floor":"18","sqft":476,"is_active":false,"created_at":"2017-02-25T02:10:04.637Z","updated_at":"2017-02-25T02:10:49.483Z","city_view":nil},{"id":51,"floorplan_id":15,"bed":0,"bath":1,"stack":"27","floor":"6","sqft":476,"is_active":false,"created_at":"2017-02-25T02:09:31.930Z","updated_at":"2017-02-25T02:10:49.502Z","city_view":nil},{"id":52,"floorplan_id":15,"bed":0,"bath":1,"stack":"27","floor":"10","sqft":476,"is_active":false,"created_at":"2017-02-25T02:09:33.063Z","updated_at":"2017-02-25T02:10:49.527Z","city_view":nil},{"id":97,"floorplan_id":15,"bed":0,"bath":1,"stack":"27","floor":"21","sqft":476,"is_active":false,"created_at":"2017-02-25T02:10:05.605Z","updated_at":"2017-02-25T02:10:49.603Z","city_view":nil}]}},{"id":"16","type":"floorplans","attributes":{"layout":215077,"windows":nil,"flats":[{"id":16,"floorplan_id":16,"bed":0,"bath":1,"stack":"10","floor":"3","sqft":486,"is_active":false,"created_at":"2017-02-25T02:09:04.939Z","updated_at":"2017-02-25T02:10:49.658Z","city_view":nil},{"id":22,"floorplan_id":16,"bed":0,"bath":1,"stack":"02","floor":"10","sqft":486,"is_active":false,"created_at":"2017-02-25T02:09:09.455Z","updated_at":"2017-02-25T02:10:49.692Z","city_view":nil},{"id":24,"floorplan_id":16,"bed":0,"bath":1,"stack":"10","floor":"12","sqft":486,"is_active":false,"created_at":"2017-02-25T02:09:09.796Z","updated_at":"2017-02-25T02:10:49.725Z","city_view":nil},{"id":37,"floorplan_id":16,"bed":0,"bath":1,"stack":"02","floor":"9","sqft":486,"is_active":false,"created_at":"2017-02-25T02:09:22.915Z","updated_at":"2017-02-25T02:10:49.759Z","city_view":nil},{"id":86,"floorplan_id":16,"bed":0,"bath":1,"stack":"02","floor":"7","sqft":486,"is_active":false,"created_at":"2017-02-25T02:10:00.337Z","updated_at":"2017-02-25T02:10:49.784Z","city_view":nil}]}},{"id":"17","type":"floorplans","attributes":{"layout":215079,"windows":nil,"flats":[{"id":32,"floorplan_id":17,"bed":0,"bath":1,"stack":"16","floor":"5","sqft":471,"is_active":true,"created_at":"2017-02-25T02:09:19.471Z","updated_at":"2017-02-25T06:50:38.321Z","city_view":nil},{"id":13,"floorplan_id":17,"bed":0,"bath":1,"stack":"19","floor":"10","sqft":471,"is_active":false,"created_at":"2017-02-25T02:09:00.245Z","updated_at":"2017-02-25T02:10:49.820Z","city_view":nil},{"id":25,"floorplan_id":17,"bed":0,"bath":1,"stack":"19","floor":"8","sqft":471,"is_active":false,"created_at":"2017-02-25T02:09:10.030Z","updated_at":"2017-02-25T02:10:49.837Z","city_view":nil},{"id":30,"floorplan_id":17,"bed":0,"bath":1,"stack":"16","floor":"6","sqft":471,"is_active":false,"created_at":"2017-02-25T02:09:16.985Z","updated_at":"2017-02-25T02:10:49.860Z","city_view":nil},{"id":31,"floorplan_id":17,"bed":0,"bath":1,"stack":"16","floor":"12","sqft":471,"is_active":false,"created_at":"2017-02-25T02:09:18.031Z","updated_at":"2017-02-25T02:10:49.892Z","city_view":nil},{"id":35,"floorplan_id":17,"bed":0,"bath":1,"stack":"16","floor":"7","sqft":471,"is_active":false,"created_at":"2017-02-25T02:09:22.426Z","updated_at":"2017-02-25T02:10:49.942Z","city_view":nil}]}},{"id":"18","type":"floorplans","attributes":{"layout":215081,"windows":{"window1":2,"window2":"","window3":"","window4":"","window5":""},"flats":[{"id":130,"floorplan_id":18,"bed":0,"bath":1,"stack":"44","floor":"3","sqft":474,"is_active":true,"created_at":"2017-02-25T02:10:43.228Z","updated_at":"2017-02-25T06:50:38.349Z","city_view":nil},{"id":80,"floorplan_id":18,"bed":0,"bath":1,"stack":"44","floor":"10","sqft":474,"is_active":false,"created_at":"2017-02-25T02:09:54.941Z","updated_at":"2017-02-25T02:10:50.017Z","city_view":nil}]}},{"id":"19","type":"floorplans","attributes":{"layout":215085,"windows":nil,"flats":[{"id":87,"floorplan_id":19,"bed":0,"bath":1,"stack":"18","floor":"4","sqft":463,"is_active":true,"created_at":"2017-02-25T02:10:00.800Z","updated_at":"2017-02-25T06:50:38.376Z","city_view":nil},{"id":11,"floorplan_id":19,"bed":0,"bath":1,"stack":"18","floor":"9","sqft":463,"is_active":false,"created_at":"2017-02-25T02:08:55.739Z","updated_at":"2017-02-25T02:10:50.120Z","city_view":nil},{"id":27,"floorplan_id":19,"bed":0,"bath":1,"stack":"18","floor":"5","sqft":463,"is_active":false,"created_at":"2017-02-25T02:09:11.555Z","updated_at":"2017-02-25T02:10:50.156Z","city_view":nil},{"id":28,"floorplan_id":19,"bed":0,"bath":1,"stack":"18","floor":"12","sqft":463,"is_active":false,"created_at":"2017-02-25T02:09:14.791Z","updated_at":"2017-02-25T02:10:50.188Z","city_view":nil},{"id":38,"floorplan_id":19,"bed":0,"bath":1,"stack":"18","floor":"7","sqft":463,"is_active":false,"created_at":"2017-02-25T02:09:23.437Z","updated_at":"2017-02-25T02:10:50.215Z","city_view":nil}]}},{"id":"20","type":"floorplans","attributes":{"layout":215089,"windows":nil,"flats":[{"id":105,"floorplan_id":20,"bed":0,"bath":1,"stack":"31","floor":"22","sqft":470,"is_active":true,"created_at":"2017-02-25T02:10:13.318Z","updated_at":"2017-02-25T06:50:38.397Z","city_view":nil}]}},{"id":"21","type":"floorplans","attributes":{"layout":215089,"windows":{"window1":3,"window2":"","window3":"","window4":"","window5":""},"flats":[{"id":42,"floorplan_id":21,"bed":0,"bath":1,"stack":"30","floor":"12","sqft":470,"is_active":false,"created_at":"2017-02-25T02:09:27.896Z","updated_at":"2017-02-25T02:10:50.371Z","city_view":nil},{"id":53,"floorplan_id":21,"bed":0,"bath":1,"stack":"30","floor":"10","sqft":470,"is_active":false,"created_at":"2017-02-25T02:09:33.657Z","updated_at":"2017-02-25T02:10:50.412Z","city_view":nil},{"id":89,"floorplan_id":21,"bed":0,"bath":1,"stack":"30","floor":"18","sqft":470,"is_active":false,"created_at":"2017-02-25T02:10:01.353Z","updated_at":"2017-02-25T02:10:50.483Z","city_view":nil}]}},{"id":"22","type":"floorplans","attributes":{"layout":215089,"windows":{"window1":2,"window2":"","window3":"","window4":"","window5":""},"flats":[{"id":93,"floorplan_id":22,"bed":0,"bath":1,"stack":"30","floor":"19","sqft":470,"is_active":false,"created_at":"2017-02-25T02:10:04.166Z","updated_at":"2017-02-25T02:10:50.651Z","city_view":nil},{"id":40,"floorplan_id":22,"bed":0,"bath":1,"stack":"30","floor":"11","sqft":470,"is_active":false,"created_at":"2017-02-25T02:09:24.175Z","updated_at":"2017-02-25T02:10:50.675Z","city_view":nil},{"id":41,"floorplan_id":22,"bed":0,"bath":1,"stack":"30","floor":"14","sqft":470,"is_active":false,"created_at":"2017-02-25T02:09:25.979Z","updated_at":"2017-02-25T02:10:50.713Z","city_view":nil},{"id":91,"floorplan_id":22,"bed":0,"bath":1,"stack":"30","floor":"21","sqft":470,"is_active":false,"created_at":"2017-02-25T02:10:03.032Z","updated_at":"2017-02-25T02:10:50.603Z","city_view":nil},{"id":92,"floorplan_id":22,"bed":0,"bath":1,"stack":"30","floor":"17","sqft":470,"is_active":false,"created_at":"2017-02-25T02:10:03.175Z","updated_at":"2017-02-25T02:10:50.629Z","city_view":nil}]}},{"id":"23","type":"floorplans","attributes":{"layout":215089,"windows":{"window1":1,"window2":1,"window3":"","window4":"","window5":""},"flats":[{"id":43,"floorplan_id":23,"bed":0,"bath":1,"stack":"31","floor":"12","sqft":470,"is_active":false,"created_at":"2017-02-25T02:09:28.331Z","updated_at":"2017-02-25T02:10:50.770Z","city_view":nil},{"id":96,"floorplan_id":23,"bed":0,"bath":1,"stack":"31","floor":"19","sqft":470,"is_active":false,"created_at":"2017-02-25T02:10:04.878Z","updated_at":"2017-02-25T02:10:50.787Z","city_view":nil}]}},{"id":"24","type":"floorplans","attributes":{"layout":215091,"windows":{"window1":1,"window2":1,"window3":"","window4":"","window5":""},"flats":[{"id":57,"floorplan_id":24,"bed":0,"bath":1,"stack":"23","floor":"23","sqft":604,"is_active":true,"created_at":"2017-02-25T02:09:36.858Z","updated_at":"2017-02-25T06:50:38.422Z","city_view":nil},{"id":62,"floorplan_id":24,"bed":0,"bath":1,"stack":"23","floor":"12","sqft":604,"is_active":true,"created_at":"2017-02-25T02:09:42.616Z","updated_at":"2017-02-25T06:50:38.445Z","city_view":nil},{"id":124,"floorplan_id":24,"bed":0,"bath":1,"stack":"23","floor":"4","sqft":604,"is_active":true,"created_at":"2017-02-25T02:10:37.367Z","updated_at":"2017-02-25T06:50:38.468Z","city_view":nil},{"id":59,"floorplan_id":24,"bed":0,"bath":1,"stack":"23","floor":"19","sqft":604,"is_active":false,"created_at":"2017-02-25T02:09:40.479Z","updated_at":"2017-02-25T02:10:50.957Z","city_view":nil},{"id":60,"floorplan_id":24,"bed":0,"bath":1,"stack":"23","floor":"21","sqft":604,"is_active":false,"created_at":"2017-02-25T02:09:40.983Z","updated_at":"2017-02-25T02:10:50.987Z","city_view":nil},{"id":61,"floorplan_id":24,"bed":0,"bath":1,"stack":"23","floor":"16","sqft":604,"is_active":false,"created_at":"2017-02-25T02:09:42.311Z","updated_at":"2017-02-25T02:10:51.011Z","city_view":nil},{"id":63,"floorplan_id":24,"bed":0,"bath":1,"stack":"23","floor":"14","sqft":604,"is_active":false,"created_at":"2017-02-25T02:09:44.475Z","updated_at":"2017-02-25T02:10:51.078Z","city_view":nil},{"id":64,"floorplan_id":24,"bed":0,"bath":1,"stack":"23","floor":"11","sqft":604,"is_active":false,"created_at":"2017-02-25T02:09:44.829Z","updated_at":"2017-02-25T02:10:51.107Z","city_view":nil},{"id":69,"floorplan_id":24,"bed":0,"bath":1,"stack":"23","floor":"10","sqft":604,"is_active":false,"created_at":"2017-02-25T02:09:49.148Z","updated_at":"2017-02-25T02:10:51.132Z","city_view":nil}]}},{"id":"25","type":"floorplans","attributes":{"layout":215093,"windows":{"window1":3,"window2":"","window3":"","window4":"","window5":""},"flats":[{"id":65,"floorplan_id":25,"bed":0,"bath":1,"stack":"24","floor":"6","sqft":583,"is_active":true,"created_at":"2017-02-25T02:09:46.124Z","updated_at":"2017-02-25T06:50:38.542Z","city_view":nil},{"id":54,"floorplan_id":25,"bed":0,"bath":1,"stack":"24","floor":"19","sqft":583,"is_active":false,"created_at":"2017-02-25T02:09:33.877Z","updated_at":"2017-02-25T02:10:51.218Z","city_view":nil},{"id":55,"floorplan_id":25,"bed":0,"bath":1,"stack":"24","floor":"23","sqft":583,"is_active":false,"created_at":"2017-02-25T02:09:34.535Z","updated_at":"2017-02-25T02:10:51.242Z","city_view":nil},{"id":58,"floorplan_id":25,"bed":0,"bath":1,"stack":"24","floor":"15","sqft":583,"is_active":false,"created_at":"2017-02-25T02:09:39.009Z","updated_at":"2017-02-25T02:10:51.291Z","city_view":nil},{"id":56,"floorplan_id":25,"bed":0,"bath":1,"stack":"24","floor":"20","sqft":583,"is_active":true,"created_at":"2017-02-25T02:09:36.507Z","updated_at":"2017-02-25T06:50:38.499Z","city_view":nil},{"id":66,"floorplan_id":25,"bed":0,"bath":1,"stack":"24","floor":"5","sqft":583,"is_active":true,"created_at":"2017-02-25T02:09:47.305Z","updated_at":"2017-02-25T06:50:38.519Z","city_view":nil},{"id":67,"floorplan_id":25,"bed":0,"bath":1,"stack":"24","floor":"10","sqft":583,"is_active":false,"created_at":"2017-02-25T02:09:47.978Z","updated_at":"2017-02-25T02:10:51.403Z","city_view":nil},{"id":70,"floorplan_id":25,"bed":0,"bath":1,"stack":"24","floor":"7","sqft":583,"is_active":false,"created_at":"2017-02-25T02:09:51.073Z","updated_at":"2017-02-25T02:10:51.451Z","city_view":nil},{"id":68,"floorplan_id":25,"bed":0,"bath":1,"stack":"24","floor":"9","sqft":583,"is_active":false,"created_at":"2017-02-25T02:09:49.018Z","updated_at":"2017-02-25T02:10:51.427Z","city_view":nil}]}},{"id":"26","type":"floorplans","attributes":{"layout":215095,"windows":{"window1":2,"window2":"","window3":"","window4":"","window5":""},"flats":[{"id":12,"floorplan_id":26,"bed":0,"bath":1,"stack":"21","floor":"3","sqft":492,"is_active":false,"created_at":"2017-02-25T02:08:57.165Z","updated_at":"2017-02-25T02:10:51.531Z","city_view":nil},{"id":20,"floorplan_id":26,"bed":0,"bath":1,"stack":"21","floor":"8","sqft":492,"is_active":false,"created_at":"2017-02-25T02:09:08.723Z","updated_at":"2017-02-25T02:10:51.547Z","city_view":nil}]}},{"id":"27","type":"floorplans","attributes":{"layout":215097,"windows":{"window1":4,"window2":"","window3":"","window4":"","window5":""},"flats":[{"id":15,"floorplan_id":27,"bed":0,"bath":1,"stack":"12","floor":"25","sqft":687,"is_active":false,"created_at":"2017-02-25T02:09:03.035Z","updated_at":"2017-02-25T02:10:51.579Z","city_view":nil},{"id":21,"floorplan_id":27,"bed":0,"bath":1,"stack":"12","floor":"15","sqft":687,"is_active":false,"created_at":"2017-02-25T02:09:09.254Z","updated_at":"2017-02-25T02:10:51.599Z","city_view":nil},{"id":29,"floorplan_id":27,"bed":0,"bath":1,"stack":"12","floor":"19","sqft":687,"is_active":false,"created_at":"2017-02-25T02:09:15.963Z","updated_at":"2017-02-25T02:10:51.619Z","city_view":nil}]}},{"id":"28","type":"floorplans","attributes":{"layout":215099,"windows":{"window1":2,"window2":"","window3":"","window4":"","window5":""},"flats":[{"id":6,"floorplan_id":28,"bed":0,"bath":1,"stack":"05","floor":"10","sqft":906,"is_active":false,"created_at":"2017-02-25T02:08:47.847Z","updated_at":"2017-02-25T02:10:51.660Z","city_view":nil},{"id":14,"floorplan_id":28,"bed":0,"bath":1,"stack":"05","floor":"9","sqft":906,"is_active":false,"created_at":"2017-02-25T02:09:02.613Z","updated_at":"2017-02-25T02:10:51.677Z","city_view":nil},{"id":36,"floorplan_id":28,"bed":0,"bath":1,"stack":"05","floor":"7","sqft":906,"is_active":false,"created_at":"2017-02-25T02:09:22.639Z","updated_at":"2017-02-25T02:10:51.704Z","city_view":nil},{"id":84,"floorplan_id":28,"bed":0,"bath":1,"stack":"05","floor":"6","sqft":906,"is_active":false,"created_at":"2017-02-25T02:09:59.507Z","updated_at":"2017-02-25T02:10:51.732Z","city_view":nil}]}},{"id":"29","type":"floorplans","attributes":{"layout":215103,"windows":{"window1":2,"window2":1,"window3":"","window4":"","window5":""},"flats":[{"id":8,"floorplan_id":29,"bed":0,"bath":1,"stack":"11","floor":"14","sqft":754,"is_active":true,"created_at":"2017-02-25T02:08:51.047Z","updated_at":"2017-02-25T06:50:38.565Z","city_view":nil},{"id":9,"floorplan_id":29,"bed":0,"bath":1,"stack":"11","floor":"12","sqft":754,"is_active":true,"created_at":"2017-02-25T02:08:51.899Z","updated_at":"2017-02-25T06:50:38.595Z","city_view":nil},{"id":33,"floorplan_id":29,"bed":0,"bath":1,"stack":"11","floor":"8","sqft":754,"is_active":true,"created_at":"2017-02-25T02:09:19.951Z","updated_at":"2017-02-25T06:50:38.621Z","city_view":nil},{"id":26,"floorplan_id":29,"bed":0,"bath":1,"stack":"11","floor":"11","sqft":754,"is_active":false,"created_at":"2017-02-25T02:09:11.165Z","updated_at":"2017-02-25T02:10:51.847Z","city_view":nil}]}},{"id":"30","type":"floorplans","attributes":{"layout":263084,"windows":nil,"flats":[{"id":10,"floorplan_id":30,"bed":0,"bath":1,"stack":"08","floor":"12","sqft":0,"is_active":true,"created_at":"2017-02-25T02:08:55.607Z","updated_at":"2017-02-25T06:50:38.644Z","city_view":nil},{"id":7,"floorplan_id":30,"bed":0,"bath":1,"stack":"08","floor":"9","sqft":486,"is_active":false,"created_at":"2017-02-25T02:08:48.845Z","updated_at":"2017-02-25T02:10:51.908Z","city_view":nil}]}}
]

floorplans_json.each do |hash|
  floorplan = Floorplan.create!(layout_id: hash[:attributes][:layout], windows: hash[:attributes][:windows])

  hash[:attributes][:flats].each do |f|
    flat = Flat.find_by(bed: f[:bed], stack: f[:stack])
    flat.floorplan = floorplan
    flat.save
  end
end
